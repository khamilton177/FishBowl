<!-- Show post -->

<div class="col-sm-8 blog-main">
  <div class="blog-post">
    <h2 class="blog-post-title"><%= @post.title %></h2>
    <p class="blog-post-meta"><%= @post.created_at.strftime("%B %d, %Y") %></p>
    <blockquote>
      <%= @post.content %>
    </blockquote>
    <p>
      <% if @current_user %>
        <%= content_tag (:span), data: {toggle: "tooltip", placement: "top", title: "New Comment"} do %>
          <%= link_to new_post_comment_path(@post), class: "m-3 post_links", data: {remote: true, toggle: "modal", target: "#newCommentModal"} do %>
            <i class="fa fa-comment-o" aria-hidden="true"></i>
          <% end %>
        <% end %>
      <% end %>
      <%= link_to("", data: {toggle: "tooltip", placement: "top", title: "See Comments"}) do %>
        <span id="show-comments-link" data-toggleClass="hide-comments" data-target=".post-comments">
          <%= @post.comments.all.length %>
        </span>
      <% end %>
      <% if @current_user && @current_user.id == @post.user_id || @current_user.admin %>
        <%= content_tag (:span), data: {toggle: "tooltip", placement: "top", title: "Edit Post"} do %>
          <%= link_to edit_post_path(@post.id), class: "m-3 post_links", data: {remote: true, toggle: "modal", target: "#editPostModal"} do %>
            <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
          <% end %>
        <% end %>
        <%= link_to post_path(@post.id), method: :delete, data: { confirm: 'Are you sure you want to delete this post?' }, class: "m-3 post_links" do %>
          <i class="fa fa-trash-o" aria-hidden="true"></i>
        <% end %>
      <% end %>
      <%= link_to("Back", :back, class: "m-3 post_links") %>
    </p>
    <div class="post-comments hide-comments">
      <% @post.comments.each do |comment| %>
        <%= image_tag comment.user.profile.avatar.url(:thumb), class: "commenter-avatar js-action-profile-avatar" %>
        <p class="blog-post-meta"><%= comment.created_at.strftime("%B %d, %Y") %></p>
        <blockquote>
          <%= comment.content %>
        </blockquote>
        <p class="">
          <% if @current_user && @current_user.id == comment.user_id %>
            <%= link_to("Delete", [comment.post, comment], method: :delete, data: { confirm: 'Delete comment?' }, class: "m-3 post_links") %>
          <% end %>
        </p>
      <% end %>
    </div>
  </div><!-- /.blog-post -->
</div> <!-- /.blog-main -->
